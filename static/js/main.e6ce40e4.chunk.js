(this["webpackJsonpquiz-app"]=this["webpackJsonpquiz-app"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),i=n.n(c),o=(n(83),n(19)),u=n(125),s=n(137),l=n(25),d=n(20),m=n(36),p=n.n(m),E=n(127),O=n(128),f=n(46),v=Object(u.a)((function(e){return Object(s.a)({questionBox:{padding:e.spacing(8)},question:{border:1},answer:{padding:e.spacing(8)},option:{textAlign:"center"}})}));var b=function(e){var t=e.onAnswer,n=e.currentQuestion,a=e.activity,c=e.round,i=e.waitForNextRound,o=e.moveToNextRound,u=v(),s=c?"".concat(a.name," / ").concat(c.title):a.name;return i?r.a.createElement(E.a,{container:!0,spacing:3,className:u.questionBox},r.a.createElement(E.a,{item:!0,xs:12,className:u.option},r.a.createElement(O.a,{onClick:o},"Next Round"))):r.a.createElement(E.a,{container:!0,spacing:3,className:u.questionBox},r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"h6"},s)),r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"h4"},"Question ",n.order)),r.a.createElement(E.a,{item:!0,xs:12,className:u.question},r.a.createElement("h4",{className:"question"},n.content)),r.a.createElement(E.a,{item:!0,xs:6,className:u.option},r.a.createElement(O.a,{onClick:t},"Correct")),r.a.createElement(E.a,{item:!0,xs:6,className:u.option},r.a.createElement(O.a,{onClick:t},"InCorrect")))},h=n(23),y="".concat("QUESTIONS.GET_ALL","_SUCCESS");"".concat("QUESTIONS.QUESTIONS.COUNT","_SUCCESS");function S(e){return e.type===y}var g="".concat("ACTIVITIES.GET_ALL","_SUCCESS");"".concat("ACTIVITIES.QUESTIONS.COUNT","_SUCCESS");function I(e){return e.type===g}var j=n(129),N=n(136),T=n(130),_=n(131),C=Object(u.a)((function(e){return{root:{width:"100%",maxWidth:360,margin:"auto"},header:{textAlign:"center"}}}));var q=function(e){var t=e.activity,n=e.questions,a=C();return r.a.createElement(j.a,{component:"nav",className:a.root,"aria-label":"result-list"},r.a.createElement(N.a,null,r.a.createElement(T.a,{primary:t.name})),r.a.createElement(N.a,null,r.a.createElement(T.a,{primary:"Results"})),r.a.createElement(_.a,{light:!0}),Object.keys(n).map((function(e){var t=n[e];return r.a.createElement(N.a,{button:!0,key:e,divider:!0},r.a.createElement(T.a,{primary:"Q".concat(t.id)}),r.a.createElement(T.a,{primary:t.isCorrect?"correct":"false"}))})))},w=Object(u.a)((function(e){return{homeIcon:{marginLeft:"50%"}}}));var U=Object(h.b)((function(e){return{questions:e.questionsOnly.byId,questionIds:e.questionsOnly.allIds,activities:e.activities.byId}}),(function(e){return{dispatch:e}}))((function(e){var t=e.match,n=e.questions,c=e.dispatch,i=e.questionIds,u=e.activities,s=w(),l=t.params.id,m=Object(a.useState)(null),v=Object(d.a)(m,2),h=v[0],y=v[1],S=Object(a.useState)(1),g=Object(d.a)(S,2),I=g[0],j=g[1],N=u[l];return Object(a.useEffect)((function(){c({payload:{client:"api",request:{url:"/activities"}},type:"ACTIVITIES.GET_ALL"})}),[c,l]),Object(a.useEffect)((function(){c({payload:{client:"api",request:{url:"/activities/".concat(l,"/questions")}},type:"QUESTIONS.GET_ALL"})}),[c,l]),Object(a.useEffect)((function(){i&&i.length>0&&y(n[I])}),[i,I,n]),null===h?r.a.createElement(E.a,{container:!0},r.a.createElement(f.a,{variant:"h4"},"Loading...")):I>i.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{questions:n,activity:N}),r.a.createElement(O.a,{className:s.homeIcon,component:o.b,to:"/"},r.a.createElement(p.a,null))):r.a.createElement(E.a,{container:!0},r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(b,{currentQuestion:h,activity:N,onAnswer:function(){I<=i.length&&(j(I+1),y(n[I+1]))},round:null})),r.a.createElement(E.a,{item:!0,xs:12,className:s.homeIcon},r.a.createElement(O.a,{component:o.b,to:"/"},r.a.createElement(p.a,null))))})),x=n(68),L=n(135),A=n(132),R=Object(u.a)((function(e){return Object(s.a)({questionBox:Object(x.a)({},e.breakpoints.up("md"),{padding:e.spacing(8),maxWidth:345}),question:{border:1},answer:{padding:e.spacing(8)}})}));var Q=Object(h.b)((function(e){return{activities:e.activities.byId}}),(function(e){return{dispatch:e}}))((function(e){var t=e.activities,n=e.dispatch,c=R();return Object(a.useEffect)((function(){n({payload:{client:"api",request:{url:"/activities"}},type:"ACTIVITIES.GET_ALL"})}),[n]),r.a.createElement(E.a,{container:!0,direction:"column",justify:"center",spacing:3,className:c.questionBox,alignItems:"center"},Object(L.a)((function(e){return r.a.createElement(E.a,{item:!0,xs:12,key:e.id},r.a.createElement(O.a,{variant:"contained",color:"primary",component:o.b,to:(t=e.id,{1:"/activities/".concat(t,"/questions"),2:"/activities/".concat(t,"/rounds")})[e.id]},e.name));var t}),Object(A.a)(t)))})),k="".concat("ROUNDS.GET_ALL","_SUCCESS"),D="".concat("ROUNDS.QUESTIONS.COUNT","_SUCCESS"),G="".concat("ROUNDS.GET_QUESTION_ALL","_SUCCESS");function B(e){return e.type===k}function P(e){return e.type===G}function V(e){return e.type===D}var W=n(69),J=n(70),X=function(){function e(){Object(W.a)(this,e),this.storage=window.sessionStorage}return Object(J.a)(e,[{key:"addItem",value:function(e,t){var n,a=this.storage.getItem(e);a?(n=JSON.parse(a)).push(t):n=[t],this.storage.setItem(e,JSON.stringify(n))}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return t?JSON.parse(t):[]}},{key:"resetItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.storage.setItem(e,JSON.stringify(t))}}]),e}(),z=n(133),F=new X,M=Object(u.a)((function(e){return{root:{width:"100%",maxWidth:360,margin:"auto"},header:{textAlign:"center"}}}));var K=function(e){var t=e.activity,n=e.cacheName,a=Object(z.a)((function(e){return e.id}),F.getItem(n)),c=M();return r.a.createElement(j.a,{component:"nav",className:c.root,"aria-label":"result-list"},r.a.createElement(N.a,null,r.a.createElement(T.a,{primary:t.name})),r.a.createElement(N.a,null,r.a.createElement(T.a,{primary:"Results"})),r.a.createElement(_.a,{light:!0}),Object.keys(a).map((function(e){var t=a[e];return r.a.createElement(N.a,{button:!0,key:e,divider:!0},r.a.createElement(T.a,{primary:"Q".concat(t.id)}),r.a.createElement(T.a,{primary:t.isCorrect?"correct":"false"}))})))},H=new X;H.resetItem("processedQuestions",[]);var $=Object(u.a)((function(e){return{homeIcon:{marginLeft:"50%"}}}));var Y=[{component:Q,path:"/"},{component:U,path:"/activities/:id/questions"},{component:Object(h.b)((function(e){return{questions:e.withRounds.byOrder,questionIds:e.withRounds.allOrders,questionCount:e.withRounds.count,activities:e.activities.byId,rounds:e.withRounds.roundByOrder,roundIds:e.withRounds.roundOrders}}),(function(e){return{dispatch:e}}))((function(e){var t=e.match,n=e.questions,c=e.dispatch,i=e.questionIds,u=e.activities,s=e.rounds,l=e.roundIds,m=e.questionCount,v=$(),h=t.params.id,y=Object(a.useState)(null),S=Object(d.a)(y,2),g=S[0],I=S[1],j=Object(a.useState)(1),N=Object(d.a)(j,2),T=N[0],_=N[1],C=Object(a.useState)(null),q=Object(d.a)(C,2),w=q[0],U=q[1],x=Object(a.useState)(1),L=Object(d.a)(x,2),A=L[0],R=L[1],Q=Object(a.useState)(!1),k=Object(d.a)(Q,2),D=k[0],G=k[1],B=Object(a.useState)(!1),P=Object(d.a)(B,2),V=P[0],W=P[1],J=function(){return H.resetItem("processedQuestions",[])},X=u[h];Object(a.useEffect)((function(){c({payload:{client:"api",request:{url:"/activities"}},type:"ACTIVITIES.GET_ALL"}),c({payload:{client:"api",request:{url:"/activities/".concat(h,"/rounds")}},type:"ROUNDS.GET_ALL"}),c(function(e){return{payload:{client:"api",request:{url:"/activities/".concat(e,"/questions/count")}},type:"ROUNDS.QUESTIONS.COUNT"}}(h))}),[c,h]),Object(a.useEffect)((function(){l&&l.length>0&&I(s[T])}),[l,s,T]),Object(a.useEffect)((function(){var e;c((e=T,{payload:{client:"api",request:{url:"/activities/".concat(h,"/rounds/").concat(e,"/questions")}},type:"ROUNDS.GET_QUESTION_ALL"})),R(1)}),[c,h,T]),Object(a.useEffect)((function(){i&&i.length>0&&U(n[A])}),[i,A,n]);var z=function(){return r.a.createElement(O.a,{onClick:J,component:o.b,to:"/"},r.a.createElement(p.a,null))};return null===w?r.a.createElement(E.a,{container:!0},r.a.createElement(f.a,{variant:"h4"},"Loading...")):V?r.a.createElement(r.a.Fragment,null,r.a.createElement(K,{activity:X,cacheName:"processedQuestions"}),r.a.createElement(z,null)):r.a.createElement(E.a,{container:!0},r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(b,{currentQuestion:w,activity:X,onAnswer:function(){if(H.addItem("processedQuestions",w),T<=l.length)if(A<i.length){var e=A+1;R(e),U(n[e])}else T<l.length&&G(!0);H.getItem("processedQuestions").length===m&&W(!0)},round:g,waitForNextRound:D,moveToNextRound:function(){G(!1);var e=T+1;_(e),I(s[e])}})),r.a.createElement(E.a,{item:!0,xs:12,className:v.homeIcon},r.a.createElement(z,null)))})),path:"/activities/:id/rounds"}].map((function(e,t){return r.a.createElement(l.a,{key:t,exact:!0,path:e.path,component:e.component})})),Z=function(){return r.a.createElement(l.c,null,Y)},ee=n(139),te={api:{url:Object({NODE_ENV:"production",PUBLIC_URL:"/quiz-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL||"http://localhost:3009"},basename:"/quiz-app"},ne=Object(u.a)((function(e){return Object(s.a)({contentGrid:{flexGrow:1,padding:e.spacing(3)},root:{display:"flex"},content:{userSelect:"none",overflowX:"hidden",margin:"auto",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})})),ae=function(){var e=ne();return r.a.createElement(o.a,{basename:te.basename},r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.contentGrid},r.a.createElement(ee.a,{className:e.content},r.a.createElement(Z,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=n(10),ce=n(71),ie=n(72),oe=n.n(ie),ue=n(73),se={api:{client:oe.a.create({baseURL:"".concat(te.api.url,"/api"),responseType:"json"})}},le=Object(ue.multiClientMiddleware)(se),de=n(134),me=function(e){return!!Object(de.a)(["meta","previousAction","onSuccess"],e)},pe=function(e){return e.type&&e.type.indexOf("_SUCCESS")>-1},Ee={byId:{}},Oe=Object(re.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee.byId,t=arguments.length>1?arguments[1]:void 0;if(I(t))return fe(t.payload.data);return e}}),fe=Object(z.a)((function(e){return e.id}));var ve={allIds:[],byId:{},count:null},be=Object(re.c)({allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve.allIds,t=arguments.length>1?arguments[1]:void 0;if(S(t))return ye(t.payload.data);return e},byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve.byId,t=arguments.length>1?arguments[1]:void 0;if(S(t))return he(t.payload.data);return e},count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve.count;arguments.length>1&&arguments[1];return e}}),he=Object(z.a)((function(e){return e.id})),ye=Object(L.a)((function(e){return e.id}));var Se={allOrders:[],byOrder:{},count:null,roundByOrder:{},roundOrders:[]},ge=Object(re.c)({allOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se.allOrders,t=arguments.length>1?arguments[1]:void 0;if(P(t))return je(t.payload.data);return e},byOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se.byOrder,t=arguments.length>1?arguments[1]:void 0;if(P(t))return Ie(t.payload.data);return e},count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se.count,t=arguments.length>1?arguments[1]:void 0;if(V(t))return t.payload.data.count;return e},roundByOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se.roundByOrder,t=arguments.length>1?arguments[1]:void 0;if(B(t))return Ie(t.payload.data);return e},roundOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se.roundOrders,t=arguments.length>1?arguments[1]:void 0;if(B(t))return je(t.payload.data);return e}}),Ie=Object(z.a)((function(e){return e.order})),je=Object(L.a)((function(e){return e.order}));var Ne=Object(re.c)({activities:Oe,questionsOnly:be,withRounds:ge}),Te="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0}):re.d,_e=Object(re.e)(Ne,Te(Object(re.a)(le,(function(e){return function(t){return function(n){pe(n)&&me(n)&&e.dispatch(n.meta.previousAction.onSuccess(n.payload.data)),t(n)}}}),ce.a)));i.a.render(r.a.createElement(h.a,{store:_e},r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,n){e.exports=n(108)},83:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.e6ce40e4.chunk.js.map